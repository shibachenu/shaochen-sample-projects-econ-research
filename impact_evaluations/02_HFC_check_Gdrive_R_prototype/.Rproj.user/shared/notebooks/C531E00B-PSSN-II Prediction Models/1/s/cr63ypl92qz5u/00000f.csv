"0","library(""caret"")       # For training models"
"0","# Filter out columns with too many missing values (e.g. >20%)"
"0","hh_constructed = read_dta(file.path(Sys.getenv(""analysis_baseline_data_dir""), ""HHSurvey.dta""))"
"0","hh_numeric <- hh_constructed %>% select(where(is.numeric))"
"0",""
"0",""
"0","threshold = 0.2"
"0","hh_pred <- hh_numeric  %>%"
"0","  select(where(~ mean(is.na(.)) <= threshold))"
"0","#secondary enrollment rate"
"0","hh_pred = hh_pred %>%"
"0","  filter(nb_children_14andabove > 0) %>%"
"0","  transform(secondary_enrollment_rate = (nb_child_ordsecondary +nb_child_advsecondary)/ nb_children_14andabove) %>%"
"0","  filter(!is.na(secondary_enrollment_rate)) %>%"
"0","  select(-nb_aged_6to13, -nb_aged_14to19, -nb_child_ordsecondary, -nb_children_under14, -nb_child_advsecondary,-pssn_childsecondary_value, - nb_children_14andabove, -nb_child_primary, -years_education)"
"0",""
"0","#income outcome: income_raw, nfa_totincome_raw (non-farming income)"
"0","# Splitting data into training and testing"
"0","set.seed(123) # For reproducibility"
"0","index <- sample(1:nrow(hh_pred), 0.7 * nrow(hh_pred))"
"0","train <- hh_pred[index, ] %>% na.omit(train)"
"0","test <- hh_pred[-index, ] %>% na.omit(test)"
